define(["exports","./buildModuleUrl-8cce5713","./Cartesian4-b0ddc4ba","./Check-7b2a090c","./when-b60132fc","./FeatureDetection-ab6f364c","./Math-31e539c2","./WebGLConstants-aba9fc67"],(function(e,t,n,a,r,i,o,s){"use strict";var u=Object.freeze({NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3});function l(e,t,n,a){this[0]=r.defaultValue(e,0),this[1]=r.defaultValue(n,0),this[2]=r.defaultValue(t,0),this[3]=r.defaultValue(a,0)}l.packedLength=4,l.pack=function(e,t,n){return n=r.defaultValue(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t},l.unpack=function(e,t,n){return t=r.defaultValue(t,0),r.defined(n)||(n=new l),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n},l.clone=function(e,t){if(r.defined(e))return r.defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):new l(e[0],e[2],e[1],e[3])},l.fromArray=function(e,t,n){return t=r.defaultValue(t,0),r.defined(n)||(n=new l),n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],n},l.fromColumnMajorArray=function(e,t){return l.clone(e,t)},l.fromRowMajorArray=function(e,t){return r.defined(t)?(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3],t):new l(e[0],e[1],e[2],e[3])},l.fromScale=function(e,t){return r.defined(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=e.y,t):new l(e.x,0,0,e.y)},l.fromUniformScale=function(e,t){return r.defined(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=e,t):new l(e,0,0,e)},l.fromRotation=function(e,t){var n=Math.cos(e),a=Math.sin(e);return r.defined(t)?(t[0]=n,t[1]=a,t[2]=-a,t[3]=n,t):new l(n,-a,a,n)},l.toArray=function(e,t){return r.defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):[e[0],e[1],e[2],e[3]]},l.getElementIndex=function(e,t){return 2*e+t},l.getColumn=function(e,t,n){var a=2*t,r=e[a],i=e[a+1];return n.x=r,n.y=i,n},l.setColumn=function(e,t,n,a){var r=2*t;return(a=l.clone(e,a))[r]=n.x,a[r+1]=n.y,a},l.getRow=function(e,t,n){var a=e[t],r=e[t+2];return n.x=a,n.y=r,n},l.setRow=function(e,t,n,a){return(a=l.clone(e,a))[t]=n.x,a[t+2]=n.y,a};var d=new t.Cartesian2;l.getScale=function(e,n){return n.x=t.Cartesian2.magnitude(t.Cartesian2.fromElements(e[0],e[1],d)),n.y=t.Cartesian2.magnitude(t.Cartesian2.fromElements(e[2],e[3],d)),n};var c=new t.Cartesian2;function f(e,t,n,a){this.x=r.defaultValue(e,0),this.y=r.defaultValue(t,0),this.z=r.defaultValue(n,0),this.w=r.defaultValue(a,0)}l.getMaximumScale=function(e){return l.getScale(e,c),t.Cartesian2.maximumComponent(c)},l.multiply=function(e,t,n){var a=e[0]*t[0]+e[2]*t[1],r=e[0]*t[2]+e[2]*t[3],i=e[1]*t[0]+e[3]*t[1],o=e[1]*t[2]+e[3]*t[3];return n[0]=a,n[1]=i,n[2]=r,n[3]=o,n},l.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n},l.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n},l.multiplyByVector=function(e,t,n){var a=e[0]*t.x+e[2]*t.y,r=e[1]*t.x+e[3]*t.y;return n.x=a,n.y=r,n},l.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n},l.multiplyByScale=function(e,t,n){return n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.y,n[3]=e[3]*t.y,n},l.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},l.transpose=function(e,t){var n=e[0],a=e[2],r=e[1],i=e[3];return t[0]=n,t[1]=a,t[2]=r,t[3]=i,t},l.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t},l.equals=function(e,t){return e===t||r.defined(e)&&r.defined(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},l.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]},l.equalsEpsilon=function(e,t,n){return e===t||r.defined(e)&&r.defined(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n},l.IDENTITY=Object.freeze(new l(1,0,0,1)),l.ZERO=Object.freeze(new l(0,0,0,0)),l.COLUMN0ROW0=0,l.COLUMN0ROW1=1,l.COLUMN1ROW0=2,l.COLUMN1ROW1=3,Object.defineProperties(l.prototype,{length:{get:function(){return l.packedLength}}}),l.prototype.clone=function(e){return l.clone(this,e)},l.prototype.equals=function(e){return l.equals(this,e)},l.prototype.equalsEpsilon=function(e,t){return l.equalsEpsilon(this,e,t)},l.prototype.toString=function(){return"("+this[0]+", "+this[2]+")\n("+this[1]+", "+this[3]+")"};var h=new n.Cartesian3;f.fromAxisAngle=function(e,t,a){var i=t/2,o=Math.sin(i),s=(h=n.Cartesian3.normalize(e,h)).x*o,u=h.y*o,l=h.z*o,d=Math.cos(i);return r.defined(a)?(a.x=s,a.y=u,a.z=l,a.w=d,a):new f(s,u,l,d)};var m=[1,2,0],p=new Array(3);f.fromRotationMatrix=function(e,n){var a,i,o,s,u,l=e[t.Matrix3.COLUMN0ROW0],d=e[t.Matrix3.COLUMN1ROW1],c=e[t.Matrix3.COLUMN2ROW2],h=l+d+c;if(h>0)u=.5*(a=Math.sqrt(h+1)),a=.5/a,i=(e[t.Matrix3.COLUMN1ROW2]-e[t.Matrix3.COLUMN2ROW1])*a,o=(e[t.Matrix3.COLUMN2ROW0]-e[t.Matrix3.COLUMN0ROW2])*a,s=(e[t.Matrix3.COLUMN0ROW1]-e[t.Matrix3.COLUMN1ROW0])*a;else{var y=0;d>l&&(y=1),c>l&&c>d&&(y=2);var w=m[y],x=m[w];a=Math.sqrt(e[t.Matrix3.getElementIndex(y,y)]-e[t.Matrix3.getElementIndex(w,w)]-e[t.Matrix3.getElementIndex(x,x)]+1);var C=p;C[y]=.5*a,a=.5/a,u=(e[t.Matrix3.getElementIndex(x,w)]-e[t.Matrix3.getElementIndex(w,x)])*a,C[w]=(e[t.Matrix3.getElementIndex(w,y)]+e[t.Matrix3.getElementIndex(y,w)])*a,C[x]=(e[t.Matrix3.getElementIndex(x,y)]+e[t.Matrix3.getElementIndex(y,x)])*a,i=-C[0],o=-C[1],s=-C[2]}return r.defined(n)?(n.x=i,n.y=o,n.z=s,n.w=u,n):new f(i,o,s,u)};var y=new f,w=new f,x=new f,C=new f;f.fromHeadingPitchRoll=function(e,t){return C=f.fromAxisAngle(n.Cartesian3.UNIT_X,e.roll,y),x=f.fromAxisAngle(n.Cartesian3.UNIT_Y,-e.pitch,t),t=f.multiply(x,C,x),w=f.fromAxisAngle(n.Cartesian3.UNIT_Z,-e.heading,y),f.multiply(w,t,t)};var M=new n.Cartesian3,_=new n.Cartesian3,E=new f,O=new f,D=new f;f.packedLength=4,f.pack=function(e,t,n){return n=r.defaultValue(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t},f.unpack=function(e,t,n){return t=r.defaultValue(t,0),r.defined(n)||(n=new f),n.x=e[t],n.y=e[t+1],n.z=e[t+2],n.w=e[t+3],n},f.packedInterpolationLength=3,f.convertPackedArrayForInterpolation=function(e,t,n,a){f.unpack(e,4*n,D),f.conjugate(D,D);for(var r=0,i=n-t+1;r<i;r++){var o=3*r;f.unpack(e,4*(t+r),E),f.multiply(E,D,E),E.w<0&&f.negate(E,E),f.computeAxis(E,M);var s=f.computeAngle(E);a[o]=M.x*s,a[o+1]=M.y*s,a[o+2]=M.z*s}},f.unpackInterpolationResult=function(e,t,a,i,o){r.defined(o)||(o=new f),n.Cartesian3.fromArray(e,0,_);var s=n.Cartesian3.magnitude(_);return f.unpack(t,4*i,O),0===s?f.clone(f.IDENTITY,E):f.fromAxisAngle(_,s,E),f.multiply(E,O,o)},f.clone=function(e,t){if(r.defined(e))return r.defined(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new f(e.x,e.y,e.z,e.w)},f.conjugate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},f.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},f.magnitude=function(e){return Math.sqrt(f.magnitudeSquared(e))},f.normalize=function(e,t){var n=1/f.magnitude(e),a=e.x*n,r=e.y*n,i=e.z*n,o=e.w*n;return t.x=a,t.y=r,t.z=i,t.w=o,t},f.inverse=function(e,t){var n=f.magnitudeSquared(e);return t=f.conjugate(e,t),f.multiplyByScalar(t,1/n,t)},f.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n},f.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n},f.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},f.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},f.multiply=function(e,t,n){var a=e.x,r=e.y,i=e.z,o=e.w,s=t.x,u=t.y,l=t.z,d=t.w,c=o*s+a*d+r*l-i*u,f=o*u-a*l+r*d+i*s,h=o*l+a*u-r*s+i*d,m=o*d-a*s-r*u-i*l;return n.x=c,n.y=f,n.z=h,n.w=m,n},f.multiplyByVec=function(e,t,a){var r=new n.Cartesian3,i=new n.Cartesian3,o=new n.Cartesian3(e.x,e.y,e.z);r=n.Cartesian3.cross(o,t,r),i=n.Cartesian3.cross(o,r,i);var s=new n.Cartesian3;s=n.Cartesian3.multiplyByScalar(r,2*e.w,s);var u=new n.Cartesian3;return u=n.Cartesian3.multiplyByScalar(r,2,u),a=n.Cartesian3.add(t,s,a),a=n.Cartesian3.add(a,u,a)},f.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n},f.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n},f.computeAxis=function(e,t){var n=e.w;if(Math.abs(n-1)<o.Math3D.EPSILON6)return t.x=t.y=t.z=0,t;var a=1/Math.sqrt(1-n*n);return t.x=e.x*a,t.y=e.y*a,t.z=e.z*a,t},f.computeAngle=function(e){return Math.abs(e.w-1)<o.Math3D.EPSILON6?0:2*Math.acos(e.w)};var v=new f;f.lerp=function(e,t,n,a){return v=f.multiplyByScalar(t,n,v),a=f.multiplyByScalar(e,1-n,a),f.add(v,a,a)};var S=new f,T=new f,g=new f;f.slerp=function(e,t,n,a){var r=f.dot(e,t),i=t;if(r<0&&(r=-r,i=S=f.negate(t,S)),1-r<o.Math3D.EPSILON6)return f.lerp(e,i,n,a);var s=Math.acos(r);return T=f.multiplyByScalar(e,Math.sin((1-n)*s),T),g=f.multiplyByScalar(i,Math.sin(n*s),g),a=f.add(T,g,a),f.multiplyByScalar(a,1/Math.sin(s),a)},f.log=function(e,t){var a=o.Math3D.acosClamped(e.w),r=0;return 0!==a&&(r=a/Math.sin(a)),n.Cartesian3.multiplyByScalar(e,r,t)},f.exp=function(e,t){var a=n.Cartesian3.magnitude(e),r=0;return 0!==a&&(r=Math.sin(a)/a),t.x=e.x*r,t.y=e.y*r,t.z=e.z*r,t.w=Math.cos(a),t};var P=new n.Cartesian3,N=new n.Cartesian3,I=new f,R=new f;f.computeInnerQuadrangle=function(e,t,a,r){var i=f.conjugate(t,I);f.multiply(i,a,R);var o=f.log(R,P);f.multiply(i,e,R);var s=f.log(R,N);return n.Cartesian3.add(o,s,o),n.Cartesian3.multiplyByScalar(o,.25,o),n.Cartesian3.negate(o,o),f.exp(o,I),f.multiply(t,I,r)},f.squad=function(e,t,n,a,r,i){var o=f.slerp(e,t,r,I),s=f.slerp(n,a,r,R);return f.slerp(o,s,2*r*(1-r),i)};for(var A=new f,U=1.9011074535173003,b=i.FeatureDetection.supportsTypedArrays()?new Float32Array(8):[],z=i.FeatureDetection.supportsTypedArrays()?new Float32Array(8):[],F=i.FeatureDetection.supportsTypedArrays()?new Float32Array(8):[],V=i.FeatureDetection.supportsTypedArrays()?new Float32Array(8):[],W=0;W<7;++W){var q=W+1,L=2*q+1;b[W]=1/(q*L),z[W]=q/L}function k(e,t,n){for(var a,r,i=0,o=e.length-1;i<=o;)if((r=n(e[a=~~((i+o)/2)],t))<0)i=a+1;else{if(!(r>0))return a;o=a-1}return~(o+1)}function Y(e,t,n,a,r){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=n,this.yPoleOffset=a,this.ut1MinusUtc=r}
/**
    @license
    sprintf.js from the php.js project - https://github.com/kvz/phpjs
    Directly from https://github.com/kvz/phpjs/blob/master/functions/strings/sprintf.js

    php.js is copyright 2012 Kevin van Zonneveld.

    Portions copyright Brett Zamir (http://brett-zamir.me), Kevin van Zonneveld
    (http://kevin.vanzonneveld.net), Onno Marsman, Theriault, Michael White
    (http://getsprink.com), Waldo Malqui Silva, Paulo Freitas, Jack, Jonas
    Raoni Soares Silva (http://www.jsfromhell.com), Philip Peterson, Legaev
    Andrey, Ates Goral (http://magnetiq.com), Alex, Ratheous, Martijn Wieringa,
    Rafa? Kukawski (http://blog.kukawski.pl), lmeyrick
    (https://sourceforge.net/projects/bcmath-js/), Nate, Philippe Baumann,
    Enrique Gonzalez, Webtoolkit.info (http://www.webtoolkit.info/), Carlos R.
    L. Rodrigues (http://www.jsfromhell.com), Ash Searle
    (http://hexmen.com/blog/), Jani Hartikainen, travc, Ole Vrijenhoek,
    Erkekjetter, Michael Grier, Rafa? Kukawski (http://kukawski.pl), Johnny
    Mast (http://www.phpvrouwen.nl), T.Wild, d3x,
    http://stackoverflow.com/questions/57803/how-to-convert-decimal-to-hex-in-javascript,
    Rafa? Kukawski (http://blog.kukawski.pl/), stag019, pilus, WebDevHobo
    (http://webdevhobo.blogspot.com/), marrtins, GeekFG
    (http://geekfg.blogspot.com), Andrea Giammarchi
    (http://webreflection.blogspot.com), Arpad Ray (mailto:arpad@php.net),
    gorthaur, Paul Smith, Tim de Koning (http://www.kingsquare.nl), Joris, Oleg
    Eremeev, Steve Hilder, majak, gettimeofday, KELAN, Josh Fraser
    (http://onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/),
    Marc Palau, Martin
    (http://www.erlenwiese.de/), Breaking Par Consulting Inc
    (http://www.breakingpar.com/bkp/home.nsf/0/87256B280015193F87256CFB006C45F7),
    Chris, Mirek Slugen, saulius, Alfonso Jimenez
    (http://www.alfonsojimenez.com), Diplom@t (http://difane.com/), felix,
    Mailfaker (http://www.weedem.fr/), Tyler Akins (http://rumkin.com), Caio
    Ariede (http://caioariede.com), Robin, Kankrelune
    (http://www.webfaktory.info/), Karol Kowalski, Imgen Tata
    (http://www.myipdf.com/), mdsjack (http://www.mdsjack.bo.it), Dreamer,
    Felix Geisendoerfer (http://www.debuggable.com/felix), Lars Fischer, AJ,
    David, Aman Gupta, Michael White, Public Domain
    (http://www.json.org/json2.js), Steven Levithan
    (http://blog.stevenlevithan.com), Sakimori, Pellentesque Malesuada,
    Thunder.m, Dj (http://phpjs.org/functions/htmlentities:425#comment_134018),
    Steve Clay, David James, Francois, class_exists, nobbler, T. Wild, Itsacon
    (http://www.itsacon.net/), date, Ole Vrijenhoek (http://www.nervous.nl/),
    Fox, Raphael (Ao RUDLER), Marco, noname, Mateusz "loonquawl" Zalega, Frank
    Forte, Arno, ger, mktime, john (http://www.jd-tech.net), Nick Kolosov
    (http://sammy.ru), marc andreu, Scott Cariss, Douglas Crockford
    (http://javascript.crockford.com), madipta, Slawomir Kaniecki,
    ReverseSyntax, Nathan, Alex Wilson, kenneth, Bayron Guevara, Adam Wallner
    (http://web2.bitbaro.hu/), paulo kuong, jmweb, Lincoln Ramsay, djmix,
    Pyerre, Jon Hohle, Thiago Mata (http://thiagomata.blog.com), lmeyrick
    (https://sourceforge.net/projects/bcmath-js/this.), Linuxworld, duncan,
    Gilbert, Sanjoy Roy, Shingo, sankai, Oskar Larsson H?gfeldt
    (http://oskar-lh.name/), Denny Wardhana, 0m3r, Everlasto, Subhasis Deb,
    josh, jd, Pier Paolo Ramon (http://www.mastersoup.com/), P, merabi, Soren
    Hansen, Eugene Bulkin (http://doubleaw.com/), Der Simon
    (http://innerdom.sourceforge.net/), echo is bad, Ozh, XoraX
    (http://www.xorax.info), EdorFaus, JB, J A R, Marc Jansen, Francesco, LH,
    Stoyan Kyosev (http://www.svest.org/), nord_ua, omid
    (http://phpjs.org/functions/380:380#comment_137122), Brad Touesnard, MeEtc
    (http://yass.meetcweb.com), Peter-Paul Koch
    (http://www.quirksmode.org/js/beat.html), Olivier Louvignes
    (http://mg-crea.com/), T0bsn, Tim Wiel, Bryan Elliott, Jalal Berrami,
    Martin, JT, David Randall, Thomas Beaucourt (http://www.webapp.fr), taith,
    vlado houba, Pierre-Luc Paour, Kristof Coomans (SCK-CEN Belgian Nucleair
    Research Centre), Martin Pool, Kirk Strobeck, Rick Waldron, Brant Messenger
    (http://www.brantmessenger.com/), Devan Penner-Woelk, Saulo Vallory, Wagner
    B. Soares, Artur Tchernychev, Valentina De Rosa, Jason Wong
    (http://carrot.org/), Christoph, Daniel Esteban, strftime, Mick@el, rezna,
    Simon Willison (http://simonwillison.net), Anton Ongson, Gabriel Paderni,
    Marco van Oort, penutbutterjelly, Philipp Lenssen, Bjorn Roesbeke
    (http://www.bjornroesbeke.be/), Bug?, Eric Nagel, Tomasz Wesolowski,
    Evertjan Garretsen, Bobby Drake, Blues (http://tech.bluesmoon.info/), Luke
    Godfrey, Pul, uestla, Alan C, Ulrich, Rafal Kukawski, Yves Sucaet,
    sowberry, Norman "zEh" Fuchs, hitwork, Zahlii, johnrembo, Nick Callen,
    Steven Levithan (stevenlevithan.com), ejsanders, Scott Baker, Brian Tafoya
    (http://www.premasolutions.com/), Philippe Jausions
    (http://pear.php.net/user/jausions), Aidan Lister
    (http://aidanlister.com/), Rob, e-mike, HKM, ChaosNo1, metjay, strcasecmp,
    strcmp, Taras Bogach, jpfle, Alexander Ermolaev
    (http://snippets.dzone.com/user/AlexanderErmolaev), DxGx, kilops, Orlando,
    dptr1988, Le Torbi, James (http://www.james-bell.co.uk/), Pedro Tainha
    (http://www.pedrotainha.com), James, Arnout Kazemier
    (http://www.3rd-Eden.com), Chris McMacken, gabriel paderni, Yannoo,
    FGFEmperor, baris ozdil, Tod Gentille, Greg Frazier, jakes, 3D-GRAF, Allan
    Jensen (http://www.winternet.no), Howard Yeend, Benjamin Lupton, davook,
    daniel airton wermann (http://wermann.com.br), Atli T¨®r, Maximusya, Ryan
    W Tenney (http://ryan.10e.us), Alexander M Beedie, fearphage
    (http://http/my.opera.com/fearphage/), Nathan Sepulveda, Victor, Matteo,
    Billy, stensi, Cord, Manish, T.J. Leahy, Riddler
    (http://www.frontierwebdev.com/), Rafa? Kukawski, FremyCompany, Matt
    Bradley, Tim de Koning, Luis Salazar (http://www.freaky-media.com/), Diogo
    Resende, Rival, Andrej Pavlovic, Garagoth, Le Torbi
    (http://www.letorbi.de/), Dino, Josep Sanz (http://www.ws3.es/), rem,
    Russell Walker (http://www.nbill.co.uk/), Jamie Beck
    (http://www.terabit.ca/), setcookie, Michael, YUI Library:
    http://developer.yahoo.com/yui/docs/YAHOO.util.DateLocale.html, Blues at
    http://hacks.bluesmoon.info/strftime/strftime.js, Ben
    (http://benblume.co.uk/), DtTvB
    (http://dt.in.th/2008-09-16.string-length-in-bytes.html), Andreas, William,
    meo, incidence, Cagri Ekin, Amirouche, Amir Habibi
    (http://www.residence-mixte.com/), Luke Smith (http://lucassmith.name),
    Kheang Hok Chin (http://www.distantia.ca/), Jay Klehr, Lorenzo Pisani,
    Tony, Yen-Wei Liu, Greenseed, mk.keck, Leslie Hoare, dude, booeyOH, Ben
    Bryan

    Licensed under the MIT (MIT-LICENSE.txt) license.

    Permission is hereby granted, free of charge, to any person obtaining a
    copy of this software and associated documentation files (the
    "Software"), to deal in the Software without restriction, including
    without limitation the rights to use, copy, modify, merge, publish,
    distribute, sublicense, and/or sell copies of the Software, and to
    permit persons to whom the Software is furnished to do so, subject to
    the following conditions:

    The above copyright notice and this permission notice shall be included
    in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
    OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
    MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
    IN NO EVENT SHALL KEVIN VAN ZONNEVELD BE LIABLE FOR ANY CLAIM, DAMAGES
    OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
    ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
    OTHER DEALINGS IN THE SOFTWARE.
    */function B(){var e=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,t=arguments,n=0,a=t[n++],r=function(e,t,n,a){n||(n=" ");var r=e.length>=t?"":Array(1+t-e.length>>>0).join(n);return a?e+r:r+e},i=function(e,t,n,a,i,o){var s=a-e.length;return s>0&&(e=n||!i?r(e,a,o,n):e.slice(0,t.length)+r("",s,"0",!0)+e.slice(t.length)),e},o=function(e,t,n,a,o,s,u){var l=e>>>0;return e=(n=n&&l&&{2:"0b",8:"0",16:"0x"}[t]||"")+r(l.toString(t),s||0,"0",!1),i(e,n,a,o,u)},s=function(e,t,n,a,r,o){return null!=a&&(e=e.slice(0,a)),i(e,"",t,n,r,o)},u=function(e,a,u,l,d,c,f){var h,m,p,y,w;if("%%"==e)return"%";for(var x=!1,C="",M=!1,_=!1,E=" ",O=u.length,D=0;u&&D<O;D++)switch(u.charAt(D)){case" ":C=" ";break;case"+":C="+";break;case"-":x=!0;break;case"'":E=u.charAt(D+1);break;case"0":M=!0;break;case"#":_=!0}if((l=l?"*"==l?+t[n++]:"*"==l.charAt(0)?+t[l.slice(1,-1)]:+l:0)<0&&(l=-l,x=!0),!isFinite(l))throw new Error("sprintf: (minimum-)width must be finite");switch(c=c?"*"==c?+t[n++]:"*"==c.charAt(0)?+t[c.slice(1,-1)]:+c:"fFeE".indexOf(f)>-1?6:"d"==f?0:void 0,w=a?t[a.slice(0,-1)]:t[n++],f){case"s":return s(String(w),x,l,c,M,E);case"c":return s(String.fromCharCode(+w),x,l,c,M);case"b":return o(w,2,_,x,l,c,M);case"o":return o(w,8,_,x,l,c,M);case"x":return o(w,16,_,x,l,c,M);case"X":return o(w,16,_,x,l,c,M).toUpperCase();case"u":return o(w,10,_,x,l,c,M);case"i":case"d":return h=+w||0,w=(m=(h=Math.round(h-h%1))<0?"-":C)+r(String(Math.abs(h)),c,"0",!1),i(w,m,x,l,M);case"e":case"E":case"f":case"F":case"g":case"G":return m=(h=+w)<0?"-":C,p=["toExponential","toFixed","toPrecision"]["efg".indexOf(f.toLowerCase())],y=["toString","toUpperCase"]["eEfFgG".indexOf(f)%2],w=m+Math.abs(h)[p](c),i(w,m,x,l,M)[y]();default:return e}};return a.replace(e,u)}function j(e,t,n,a,r,i,o,s){this.year=e,this.month=t,this.day=n,this.hour=a,this.minute=r,this.second=i,this.millisecond=o,this.isLeapSecond=s}function G(e){return e%4==0&&e%100!=0||e%400==0}function Z(e,t){this.julianDate=e,this.offset=t}b[7]=U/136,z[7]=8*U/17,f.fastSlerp=function(e,t,n,a){var r,i=f.dot(e,t);i>=0?r=1:(r=-1,i=-i);for(var o=i-1,s=1-n,u=n*n,l=s*s,d=7;d>=0;--d)F[d]=(b[d]*u-z[d])*o,V[d]=(b[d]*l-z[d])*o;var c=r*n*(1+F[0]*(1+F[1]*(1+F[2]*(1+F[3]*(1+F[4]*(1+F[5]*(1+F[6]*(1+F[7])))))))),h=s*(1+V[0]*(1+V[1]*(1+V[2]*(1+V[3]*(1+V[4]*(1+V[5]*(1+V[6]*(1+V[7])))))))),m=f.multiplyByScalar(e,h,A);return f.multiplyByScalar(t,c,a),f.add(m,a,a)},f.fastSquad=function(e,t,n,a,r,i){var o=f.fastSlerp(e,t,r,I),s=f.fastSlerp(n,a,r,R);return f.fastSlerp(o,s,2*r*(1-r),i)},f.equals=function(e,t){return e===t||r.defined(e)&&r.defined(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},f.equalsEpsilon=function(e,t,n){return e===t||r.defined(e)&&r.defined(t)&&Math.abs(e.x-t.x)<=n&&Math.abs(e.y-t.y)<=n&&Math.abs(e.z-t.z)<=n&&Math.abs(e.w-t.w)<=n},f.ZERO=Object.freeze(new f(0,0,0,0)),f.IDENTITY=Object.freeze(new f(0,0,0,1)),f.prototype.clone=function(e){return f.clone(this,e)},f.prototype.equals=function(e){return f.equals(this,e)},f.prototype.equalsEpsilon=function(e,t){return f.equalsEpsilon(this,e,t)},f.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var X=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),J=Object.freeze({UTC:0,TAI:1}),H=new j,$=[31,28,31,30,31,30,31,31,30,31,30,31];function Q(e,t){return he.compare(e.julianDate,t.julianDate)}var K=new Z;function ee(e){K.julianDate=e;var t=he.leapSeconds,n=k(t,K,Q);n<0&&(n=~n),n>=t.length&&(n=t.length-1);var a=t[n].offset;n>0&&(he.secondsDifference(t[n].julianDate,e)>a&&(a=t[--n].offset));he.addSeconds(e,a,e)}function te(e,t){K.julianDate=e;var n=he.leapSeconds,a=k(n,K,Q);if(a<0&&(a=~a),0===a)return he.addSeconds(e,-n[0].offset,t);if(a>=n.length)return he.addSeconds(e,-n[a-1].offset,t);var r=he.secondsDifference(n[a].julianDate,e);return 0===r?he.addSeconds(e,-n[a].offset,t):r<=1?void 0:he.addSeconds(e,-n[--a].offset,t)}function ne(e,t,n){var a=t/X.SECONDS_PER_DAY|0;return e+=a,(t-=X.SECONDS_PER_DAY*a)<0&&(e--,t+=X.SECONDS_PER_DAY),n.dayNumber=e,n.secondsOfDay=t,n}function ae(e,t,n,a,r,i,o){var s=(t-14)/12|0,u=e+4800+s,l=(1461*u/4|0)+(367*(t-2-12*s)/12|0)-(3*((u+100)/100|0)/4|0)+n-32075;(a-=12)<0&&(a+=24);var d=i+(a*X.SECONDS_PER_HOUR+r*X.SECONDS_PER_MINUTE+o*X.SECONDS_PER_MILLISECOND);return d>=43200&&(l-=1),[l,d]}var re=/^(\d{4})$/,ie=/^(\d{4})-(\d{2})$/,oe=/^(\d{4})-?(\d{3})$/,se=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,ue=/^(\d{4})-?(\d{2})-?(\d{2})$/,le=/([Z+\-])?(\d{2})?:?(\d{2})?$/,de=/^(\d{2})(\.\d+)?/.source+le.source,ce=/^(\d{2}):?(\d{2})(\.\d+)?/.source+le.source,fe=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+le.source;function he(e,t,n){this.dayNumber=void 0,this.secondsOfDay=void 0,e=r.defaultValue(e,0),t=r.defaultValue(t,0),n=r.defaultValue(n,J.UTC);var a=0|e;ne(a,t+=(e-a)*X.SECONDS_PER_DAY,this),n===J.UTC&&ee(this)}he.fromGregorianDate=function(e,t){var n=ae(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return r.defined(t)?(ne(n[0],n[1],t),ee(t),t):new he(n[0],n[1],J.UTC)},he.fromDate=function(e,t){var n=ae(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return r.defined(t)?(ne(n[0],n[1],t),ee(t),t):new he(n[0],n[1],J.UTC)},he.fromIso8601=function(e,t){var n,a,i,o,s=(e=e.replace(",",".")).split("T"),u=1,l=1,d=0,c=0,f=0,h=0,m=s[0],p=s[1];if(null!==(s=m.match(ue)))n=+s[1],u=+s[2],l=+s[3];else if(null!==(s=m.match(ie)))n=+s[1],u=+s[2];else if(null!==(s=m.match(re)))n=+s[1];else{var y;if(null!==(s=m.match(oe)))n=+s[1],y=+s[2],i=G(n);else if(null!==(s=m.match(se)))n=+s[1],y=7*+s[2]+(+s[3]||0)-new Date(Date.UTC(n,0,4)).getUTCDay()-3;(a=new Date(Date.UTC(n,0,1))).setUTCDate(y),u=a.getUTCMonth()+1,l=a.getUTCDate()}if(i=G(n),r.defined(p)){null!==(s=p.match(fe))?(d=+s[1],c=+s[2],f=+s[3],h=1e3*+(s[4]||0),o=5):null!==(s=p.match(ce))?(d=+s[1],c=+s[2],f=60*+(s[3]||0),o=4):null!==(s=p.match(de))&&(d=+s[1],c=60*+(s[2]||0),o=3);var w=s[o],x=+s[o+1],C=+(s[o+2]||0);switch(w){case"+":d-=x,c-=C;break;case"-":d+=x,c+=C;break;case"Z":break;default:c+=new Date(Date.UTC(n,u-1,l,d,c)).getTimezoneOffset()}}var M=60===f;for(M&&f--;c>=60;)c-=60,d++;for(;d>=24;)d-=24,l++;for(a=i&&2===u?29:$[u-1];l>a;)l-=a,++u>12&&(u-=12,n++),a=i&&2===u?29:$[u-1];for(;c<0;)c+=60,d--;for(;d<0;)d+=24,l--;for(;l<1;)--u<1&&(u+=12,n--),l+=a=i&&2===u?29:$[u-1];var _=ae(n,u,l,d,c,f,h);return r.defined(t)?(ne(_[0],_[1],t),ee(t)):t=new he(_[0],_[1],J.UTC),M&&he.addSeconds(t,1,t),t},he.now=function(e){return he.fromDate(new Date,e)};var me=new he(0,0,J.TAI);function pe(e){if(e=r.defaultValue(e,r.defaultValue.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=r.defaultValue(e.addNewLeapSeconds,!0),r.defined(e.data))we(this,e.data);else if(r.defined(e.url)){var n=t.Resource.createIfNeeded(e.url),a=this;this._downloadPromise=r.when(n.fetchJson(),(function(e){we(a,e)}),(function(){a._dataError="An error occurred while retrieving the EOP data from the URL "+n.url+"."}))}else we(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function ye(e,t){return he.compare(e.julianDate,t)}function we(e,t){if(r.defined(t.columnNames))if(r.defined(t.samples)){var n=t.columnNames.indexOf("modifiedJulianDateUtc"),a=t.columnNames.indexOf("xPoleWanderRadians"),i=t.columnNames.indexOf("yPoleWanderRadians"),o=t.columnNames.indexOf("ut1MinusUtcSeconds"),s=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),u=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),l=t.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||a<0||i<0||o<0||s<0||u<0||l<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var d,c=e._samples=t.samples,f=e._dates=[];e._dateColumn=n,e._xPoleWanderRadiansColumn=a,e._yPoleWanderRadiansColumn=i,e._ut1MinusUtcSecondsColumn=o,e._xCelestialPoleOffsetRadiansColumn=s,e._yCelestialPoleOffsetRadiansColumn=u,e._taiMinusUtcSecondsColumn=l,e._columnCount=t.columnNames.length,e._lastIndex=void 0;for(var h=e._addNewLeapSeconds,m=0,p=c.length;m<p;m+=e._columnCount){var y=c[m+n],w=c[m+l],x=new he(y+X.MODIFIED_JULIAN_DATE_DIFFERENCE,w,J.TAI);if(f.push(x),h){if(w!==d&&r.defined(d)){var C=he.leapSeconds,M=k(C,x,ye);if(M<0){var _=new Z(x,w);C.splice(~M,0,_)}}d=w}}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function xe(e,t,n,a,r){var i=n*a;r.xPoleWander=t[i+e._xPoleWanderRadiansColumn],r.yPoleWander=t[i+e._yPoleWanderRadiansColumn],r.xPoleOffset=t[i+e._xCelestialPoleOffsetRadiansColumn],r.yPoleOffset=t[i+e._yCelestialPoleOffsetRadiansColumn],r.ut1MinusUtc=t[i+e._ut1MinusUtcSecondsColumn]}function Ce(e,t,n){return t+e*(n-t)}function Me(e,t,n,a,r,i,o){var s=e._columnCount;if(i>t.length-1)return o.xPoleWander=0,o.yPoleWander=0,o.xPoleOffset=0,o.yPoleOffset=0,o.ut1MinusUtc=0,o;var u=t[r],l=t[i];if(u.equals(l)||a.equals(u))return xe(e,n,r,s,o),o;if(a.equals(l))return xe(e,n,i,s,o),o;var d=he.secondsDifference(a,u)/he.secondsDifference(l,u),c=r*s,f=i*s,h=n[c+e._ut1MinusUtcSecondsColumn],m=n[f+e._ut1MinusUtcSecondsColumn],p=m-h;if(p>.5||p<-.5){var y=n[c+e._taiMinusUtcSecondsColumn],w=n[f+e._taiMinusUtcSecondsColumn];y!==w&&(l.equals(a)?h=m:m-=w-y)}return o.xPoleWander=Ce(d,n[c+e._xPoleWanderRadiansColumn],n[f+e._xPoleWanderRadiansColumn]),o.yPoleWander=Ce(d,n[c+e._yPoleWanderRadiansColumn],n[f+e._yPoleWanderRadiansColumn]),o.xPoleOffset=Ce(d,n[c+e._xCelestialPoleOffsetRadiansColumn],n[f+e._xCelestialPoleOffsetRadiansColumn]),o.yPoleOffset=Ce(d,n[c+e._yCelestialPoleOffsetRadiansColumn],n[f+e._yCelestialPoleOffsetRadiansColumn]),o.ut1MinusUtc=Ce(d,h,m),o}function _e(e,t,n){this.heading=r.defaultValue(e,0),this.pitch=r.defaultValue(t,0),this.roll=r.defaultValue(n,0)}function Ee(e,t,n){this.x=e,this.y=t,this.s=n}function Oe(e){e=r.defaultValue(e,r.defaultValue.EMPTY_OBJECT),this._xysFileUrlTemplate=t.Resource.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=r.defaultValue(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=r.defaultValue(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new he(this._sampleZeroJulianEphemerisDate,0,J.TAI),this._stepSizeDays=r.defaultValue(e.stepSizeDays,1),this._samplesPerXysFile=r.defaultValue(e.samplesPerXysFile,1e3),this._totalSamples=r.defaultValue(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var n=this._interpolationOrder,a=this._denominators=new Array(n+1),i=this._xTable=new Array(n+1),o=Math.pow(this._stepSizeDays,n),s=0;s<=n;++s){a[s]=o,i[s]=s*this._stepSizeDays;for(var u=0;u<=n;++u)u!==s&&(a[s]*=s-u);a[s]=1/a[s]}this._work=new Array(n+1),this._coef=new Array(n+1)}he.toGregorianDate=function(e,t){var n=!1,a=te(e,me);r.defined(a)||(he.addSeconds(e,-1,me),a=te(me,me),n=!0);var i=a.dayNumber,o=a.secondsOfDay;o>=43200&&(i+=1);var s=i+68569|0,u=4*s/146097|0,l=4e3*((s=s-((146097*u+3)/4|0)|0)+1)/1461001|0,d=80*(s=s-(1461*l/4|0)+31|0)/2447|0,c=s-(2447*d/80|0)|0,f=d+2-12*(s=d/11|0)|0,h=100*(u-49)+l+s|0,m=o/X.SECONDS_PER_HOUR|0,p=o-m*X.SECONDS_PER_HOUR,y=p/X.SECONDS_PER_MINUTE|0,w=0|(p-=y*X.SECONDS_PER_MINUTE),x=(p-w)/X.SECONDS_PER_MILLISECOND;return(m+=12)>23&&(m-=24),n&&(w+=1),r.defined(t)?(t.year=h,t.month=f,t.day=c,t.hour=m,t.minute=y,t.second=w,t.millisecond=x,t.isLeapSecond=n,t):new j(h,f,c,m,y,w,x,n)},he.toDate=function(e){var t=he.toGregorianDate(e,H),n=t.second;return t.isLeapSecond&&(n-=1),new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,n,t.millisecond))},he.toIso8601=function(e,t){var n=he.toGregorianDate(e,H),a=n.year,i=n.month,o=n.day,s=n.hour,u=n.minute,l=n.second,d=n.millisecond;return 1e4===a&&1===i&&1===o&&0===s&&0===u&&0===l&&0===d&&(a=9999,i=12,o=31,s=24),r.defined(t)||0===d?r.defined(t)&&0!==t?B("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",a,i,o,s,u,l,(.01*d).toFixed(t).replace(".","").slice(0,t)):B("%04d-%02d-%02dT%02d:%02d:%02dZ",a,i,o,s,u,l):B("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",a,i,o,s,u,l,(.01*d).toString().replace(".",""))},he.clone=function(e,t){if(r.defined(e))return r.defined(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new he(e.dayNumber,e.secondsOfDay,J.TAI)},he.compare=function(e,t){var n=e.dayNumber-t.dayNumber;return 0!==n?n:e.secondsOfDay-t.secondsOfDay},he.equals=function(e,t){return e===t||r.defined(e)&&r.defined(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},he.equalsEpsilon=function(e,t,n){return e===t||r.defined(e)&&r.defined(t)&&Math.abs(he.secondsDifference(e,t))<=n},he.totalDays=function(e){return e.dayNumber+e.secondsOfDay/X.SECONDS_PER_DAY},he.secondsDifference=function(e,t){return(e.dayNumber-t.dayNumber)*X.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},he.daysDifference=function(e,t){return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/X.SECONDS_PER_DAY},he.computeTaiMinusUtc=function(e){K.julianDate=e;var t=he.leapSeconds,n=k(t,K,Q);return n<0&&(n=~n,--n<0&&(n=0)),t[n].offset},he.addSeconds=function(e,t,n){return ne(e.dayNumber,e.secondsOfDay+t,n)},he.addMinutes=function(e,t,n){var a=e.secondsOfDay+t*X.SECONDS_PER_MINUTE;return ne(e.dayNumber,a,n)},he.addHours=function(e,t,n){var a=e.secondsOfDay+t*X.SECONDS_PER_HOUR;return ne(e.dayNumber,a,n)},he.addDays=function(e,t,n){return ne(e.dayNumber+t,e.secondsOfDay,n)},he.lessThan=function(e,t){return he.compare(e,t)<0},he.lessThanOrEquals=function(e,t){return he.compare(e,t)<=0},he.greaterThan=function(e,t){return he.compare(e,t)>0},he.greaterThanOrEquals=function(e,t){return he.compare(e,t)>=0},he.prototype.clone=function(e){return he.clone(this,e)},he.prototype.equals=function(e){return he.equals(this,e)},he.prototype.equalsEpsilon=function(e,t){return he.equalsEpsilon(this,e,t)},he.prototype.toString=function(){return he.toIso8601(this)},he.leapSeconds=[new Z(new he(2441317,43210,J.TAI),10),new Z(new he(2441499,43211,J.TAI),11),new Z(new he(2441683,43212,J.TAI),12),new Z(new he(2442048,43213,J.TAI),13),new Z(new he(2442413,43214,J.TAI),14),new Z(new he(2442778,43215,J.TAI),15),new Z(new he(2443144,43216,J.TAI),16),new Z(new he(2443509,43217,J.TAI),17),new Z(new he(2443874,43218,J.TAI),18),new Z(new he(2444239,43219,J.TAI),19),new Z(new he(2444786,43220,J.TAI),20),new Z(new he(2445151,43221,J.TAI),21),new Z(new he(2445516,43222,J.TAI),22),new Z(new he(2446247,43223,J.TAI),23),new Z(new he(2447161,43224,J.TAI),24),new Z(new he(2447892,43225,J.TAI),25),new Z(new he(2448257,43226,J.TAI),26),new Z(new he(2448804,43227,J.TAI),27),new Z(new he(2449169,43228,J.TAI),28),new Z(new he(2449534,43229,J.TAI),29),new Z(new he(2450083,43230,J.TAI),30),new Z(new he(2450630,43231,J.TAI),31),new Z(new he(2451179,43232,J.TAI),32),new Z(new he(2453736,43233,J.TAI),33),new Z(new he(2454832,43234,J.TAI),34),new Z(new he(2456109,43235,J.TAI),35),new Z(new he(2457204,43236,J.TAI),36),new Z(new he(2457754,43237,J.TAI),37)],pe.NONE=Object.freeze({getPromiseToLoad:function(){return r.when()},compute:function(e,t){return r.defined(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new Y(0,0,0,0,0),t}}),pe.prototype.getPromiseToLoad=function(){return r.when(this._downloadPromise)},pe.prototype.compute=function(e,t){if(r.defined(this._samples)){if(r.defined(t)||(t=new Y(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;var n=this._dates,a=this._lastIndex,i=0,o=0;if(r.defined(a)){var u=n[a],l=n[a+1],d=he.lessThanOrEquals(u,e),c=!r.defined(l),f=c||he.greaterThanOrEquals(l,e);if(d&&f)return i=a,!c&&l.equals(e)&&++i,o=i+1,Me(this,n,this._samples,e,i,o,t),t}var h=k(n,e,he.compare,this._dateColumn);return h>=0?(h<n.length-1&&n[h+1].equals(e)&&++h,i=h,o=h):(i=(o=~h)-1)<0&&(i=0),this._lastIndex=i,Me(this,n,this._samples,e,i,o,t),t}if(r.defined(this._dataError))throw new s.RuntimeError(this._dataError)},_e.fromQuaternion=function(e,t){r.defined(t)||(t=new _e);var n=2*(e.w*e.y-e.z*e.x),a=1-2*(e.x*e.x+e.y*e.y),i=2*(e.w*e.x+e.y*e.z),s=1-2*(e.y*e.y+e.z*e.z),u=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(u,s),t.roll=Math.atan2(i,a),t.pitch=-o.Math3D.asinClamped(n),t},_e.fromDegrees=function(e,t,n,a){return r.defined(a)||(a=new _e),a.heading=e*o.Math3D.RADIANS_PER_DEGREE,a.pitch=t*o.Math3D.RADIANS_PER_DEGREE,a.roll=n*o.Math3D.RADIANS_PER_DEGREE,a},_e.clone=function(e,t){if(r.defined(e))return r.defined(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new _e(e.heading,e.pitch,e.roll)},_e.equals=function(e,t){return e===t||r.defined(e)&&r.defined(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},_e.equalsEpsilon=function(e,t,n,a){return e===t||r.defined(e)&&r.defined(t)&&o.Math3D.equalsEpsilon(e.heading,t.heading,n,a)&&o.Math3D.equalsEpsilon(e.pitch,t.pitch,n,a)&&o.Math3D.equalsEpsilon(e.roll,t.roll,n,a)},_e.prototype.clone=function(e){return _e.clone(this,e)},_e.prototype.equals=function(e){return _e.equals(this,e)},_e.prototype.equalsEpsilon=function(e,t,n){return _e.equalsEpsilon(this,e,t,n)},_e.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var De=new he(0,0,J.TAI);function ve(e,t,n){var a=De;return a.dayNumber=t,a.secondsOfDay=n,he.daysDifference(a,e._sampleZeroDateTT)}function Se(e,n){if(e._chunkDownloadsInProgress[n])return e._chunkDownloadsInProgress[n];var a,i=r.when.defer();e._chunkDownloadsInProgress[n]=i;var o=e._xysFileUrlTemplate;return a=r.defined(o)?o.getDerivedResource({templateValues:{0:n}}):new t.Resource({url:t.buildModuleUrl("Assets/IAU2006_XYS/IAU2006_XYS_"+n+".json")}),r.when(a.fetchJson(),(function(t){e._chunkDownloadsInProgress[n]=!1;for(var a=e._samples,r=t.samples,o=n*e._samplesPerXysFile*3,s=0,u=r.length;s<u;++s)a[o+s]=r[s];i.resolve()})),i.promise}Oe.prototype.preload=function(e,t,n,a){var i=ve(this,e,t),o=ve(this,n,a),s=i/this._stepSizeDays-this._interpolationOrder/2|0;s<0&&(s=0);var u=o/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;u>=this._totalSamples&&(u=this._totalSamples-1);for(var l=s/this._samplesPerXysFile|0,d=u/this._samplesPerXysFile|0,c=[],f=l;f<=d;++f)c.push(Se(this,f));return r.when.all(c)},Oe.prototype.computeXysRadians=function(e,t,n){var a=ve(this,e,t);if(!(a<0)){var i=a/this._stepSizeDays|0;if(!(i>=this._totalSamples)){var o=this._interpolationOrder,s=i-(o/2|0);s<0&&(s=0);var u=s+o;u>=this._totalSamples&&(s=(u=this._totalSamples-1)-o)<0&&(s=0);var l=!1,d=this._samples;if(r.defined(d[3*s])||(Se(this,s/this._samplesPerXysFile|0),l=!0),r.defined(d[3*u])||(Se(this,u/this._samplesPerXysFile|0),l=!0),!l){r.defined(n)?(n.x=0,n.y=0,n.s=0):n=new Ee(0,0,0);var c,f,h=a-s*this._stepSizeDays,m=this._work,p=this._denominators,y=this._coef,w=this._xTable;for(c=0;c<=o;++c)m[c]=h-w[c];for(c=0;c<=o;++c){for(y[c]=1,f=0;f<=o;++f)f!==c&&(y[c]*=m[f]);y[c]*=p[c];var x=3*(s+c);n.x+=y[c]*d[x++],n.y+=y[c]*d[x++],n.s+=y[c]*d[x]}return n}}}};var Te={},ge={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Pe={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Ne={},Ie={east:new n.Cartesian3,north:new n.Cartesian3,up:new n.Cartesian3,west:new n.Cartesian3,south:new n.Cartesian3,down:new n.Cartesian3},Re=new n.Cartesian3,Ae=new n.Cartesian3,Ue=new n.Cartesian3;Te.localFrameToFixedFrameGenerator=function(e,i){if(!ge.hasOwnProperty(e)||!ge[e].hasOwnProperty(i))throw new a.DeveloperError("firstAxis and secondAxis must be east, north, up, west, south or down.");var s,u=ge[e][i],l=e+i;return r.defined(Ne[l])?s=Ne[l]:(s=function(a,s,l){if(r.defined(l)||(l=new t.Matrix4),n.Cartesian3.equalsEpsilon(a,n.Cartesian3.ZERO,o.Math3D.EPSILON14))n.Cartesian3.unpack(Pe[e],0,Re),n.Cartesian3.unpack(Pe[i],0,Ae),n.Cartesian3.unpack(Pe[u],0,Ue);else if(o.Math3D.equalsEpsilon(a.x,0,o.Math3D.EPSILON14)&&o.Math3D.equalsEpsilon(a.y,0,o.Math3D.EPSILON14)){var d=o.Math3D.sign(a.z);n.Cartesian3.unpack(Pe[e],0,Re),"east"!==e&&"west"!==e&&n.Cartesian3.multiplyByScalar(Re,d,Re),n.Cartesian3.unpack(Pe[i],0,Ae),"east"!==i&&"west"!==i&&n.Cartesian3.multiplyByScalar(Ae,d,Ae),n.Cartesian3.unpack(Pe[u],0,Ue),"east"!==u&&"west"!==u&&n.Cartesian3.multiplyByScalar(Ue,d,Ue)}else{(s=r.defaultValue(s,t.Ellipsoid.WGS84)).geodeticSurfaceNormal(a,Ie.up);var c=Ie.up,f=Ie.east;f.x=-a.y,f.y=a.x,f.z=0,n.Cartesian3.normalize(f,Ie.east),n.Cartesian3.cross(c,f,Ie.north),n.Cartesian3.multiplyByScalar(Ie.up,-1,Ie.down),n.Cartesian3.multiplyByScalar(Ie.east,-1,Ie.west),n.Cartesian3.multiplyByScalar(Ie.north,-1,Ie.south),Re=Ie[e],Ae=Ie[i],Ue=Ie[u]}return l[0]=Re.x,l[1]=Re.y,l[2]=Re.z,l[3]=0,l[4]=Ae.x,l[5]=Ae.y,l[6]=Ae.z,l[7]=0,l[8]=Ue.x,l[9]=Ue.y,l[10]=Ue.z,l[11]=0,l[12]=a.x,l[13]=a.y,l[14]=a.z,l[15]=1,l},Ne[l]=s),s},Te.eastNorthUpToFixedFrame=Te.localFrameToFixedFrameGenerator("east","north"),Te.northEastDownToFixedFrame=Te.localFrameToFixedFrameGenerator("north","east"),Te.northUpEastToFixedFrame=Te.localFrameToFixedFrameGenerator("north","up"),Te.northWestUpToFixedFrame=Te.localFrameToFixedFrameGenerator("north","west");var be=new f,ze=new n.Cartesian3(1,1,1),Fe=new t.Matrix4;Te.headingPitchRollToFixedFrame=function(e,a,i,o,s){o=r.defaultValue(o,Te.eastNorthUpToFixedFrame);var u=f.fromHeadingPitchRoll(a,be),l=t.Matrix4.fromTranslationQuaternionRotationScale(n.Cartesian3.ZERO,u,ze,Fe);return s=o(e,i,s),t.Matrix4.multiply(s,l,s)};var Ve=new t.Matrix4,We=new t.Matrix3;Te.headingPitchRollQuaternion=function(e,n,a,r,i){var o=Te.headingPitchRollToFixedFrame(e,n,a,r,Ve),s=t.Matrix4.getMatrix3(o,We);return f.fromRotationMatrix(s,i)};var qe=new n.Cartesian3(1,1,1),Le=new n.Cartesian3,ke=new t.Matrix4,Ye=new t.Matrix4,Be=new t.Matrix3,je=new f;Te.fixedFrameToHeadingPitchRoll=function(e,a,i,o){a=r.defaultValue(a,t.Ellipsoid.WGS84),i=r.defaultValue(i,Te.eastNorthUpToFixedFrame),r.defined(o)||(o=new _e);var s=t.Matrix4.getTranslation(e,Le);if(n.Cartesian3.equals(s,n.Cartesian3.ZERO))return o.heading=0,o.pitch=0,o.roll=0,o;var u=t.Matrix4.inverseTransformation(i(s,a,ke),ke),l=t.Matrix4.setScale(e,qe,Ye);l=t.Matrix4.setTranslation(l,n.Cartesian3.ZERO,l),u=t.Matrix4.multiply(u,l,u);var d=f.fromRotationMatrix(t.Matrix4.getMatrix3(u,Be),je);return d=f.normalize(d,d),_e.fromQuaternion(d,o)};var Ge=o.Math3D.TWO_PI/86400,Ze=new he;Te.computeTemeToPseudoFixedMatrix=function(e,n){var a,i=(Ze=he.addSeconds(e,-he.computeTaiMinusUtc(e),Ze)).dayNumber,s=Ze.secondsOfDay,u=i-2451545,l=(24110.54841+(a=s>=43200?(u+.5)/X.DAYS_PER_JULIAN_CENTURY:(u-.5)/X.DAYS_PER_JULIAN_CENTURY)*(8640184.812866+a*(.093104+-62e-7*a)))*Ge%o.Math3D.TWO_PI+(72921158553e-15+11772758384668e-32*(i-2451545.5))*((s+.5*X.SECONDS_PER_DAY)%X.SECONDS_PER_DAY),d=Math.cos(l),c=Math.sin(l);return r.defined(n)?(n[0]=d,n[1]=-c,n[2]=0,n[3]=c,n[4]=d,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n):new t.Matrix3(d,c,0,-c,d,0,0,0,1)},Te.iau2006XysData=new Oe,Te.earthOrientationParameters=pe.NONE;var Xe=32.184;Te.preloadIcrfFixed=function(e){var t=e.start.dayNumber,n=e.start.secondsOfDay+Xe,a=e.stop.dayNumber,i=e.stop.secondsOfDay+Xe,o=Te.iau2006XysData.preload(t,n,a,i),s=Te.earthOrientationParameters.getPromiseToLoad();return r.when.all([o,s])},Te.computeIcrfToFixedMatrix=function(e,n){r.defined(n)||(n=new t.Matrix3);var a=Te.computeFixedToIcrfMatrix(e,n);if(r.defined(a))return t.Matrix3.transpose(a,n)};var Je=new Ee(0,0,0),He=new Y(0,0,0,0,0,0),$e=new t.Matrix3,Qe=new t.Matrix3;Te.computeFixedToIcrfMatrix=function(e,n){r.defined(n)||(n=new t.Matrix3);var a=Te.earthOrientationParameters.compute(e,He);if(r.defined(a)){var i=e.dayNumber,s=e.secondsOfDay+Xe,u=Te.iau2006XysData.computeXysRadians(i,s,Je);if(r.defined(u)){var l=u.x+a.xPoleOffset,d=u.y+a.yPoleOffset,c=1/(1+Math.sqrt(1-l*l-d*d)),f=$e;f[0]=1-c*l*l,f[3]=-c*l*d,f[6]=l,f[1]=-c*l*d,f[4]=1-c*d*d,f[7]=d,f[2]=-l,f[5]=-d,f[8]=1-c*(l*l+d*d);var h=t.Matrix3.fromRotationZ(-u.s,Qe),m=t.Matrix3.multiply(f,h,$e),p=e.dayNumber-2451545,y=(e.secondsOfDay-he.computeTaiMinusUtc(e)+a.ut1MinusUtc)/X.SECONDS_PER_DAY,w=.779057273264+y+.00273781191135448*(p+y);w=w%1*o.Math3D.TWO_PI;var x=t.Matrix3.fromRotationZ(w,Qe),C=t.Matrix3.multiply(m,x,$e),M=Math.cos(a.xPoleWander),_=Math.cos(a.yPoleWander),E=Math.sin(a.xPoleWander),O=Math.sin(a.yPoleWander),D=i-2451545+s/X.SECONDS_PER_DAY,v=-47e-6*(D/=36525)*o.Math3D.RADIANS_PER_DEGREE/3600,S=Math.cos(v),T=Math.sin(v),g=Qe;return g[0]=M*S,g[1]=M*T,g[2]=E,g[3]=-_*T+O*E*S,g[4]=_*S+O*E*T,g[5]=-O*M,g[6]=-O*T-_*E*S,g[7]=O*S-_*E*T,g[8]=_*M,t.Matrix3.multiply(C,g,n)}}};var Ke=new n.Cartesian4;Te.pointToWindowCoordinates=function(e,t,n,a){return(a=Te.pointToGLWindowCoordinates(e,t,n,a)).y=2*t[5]-a.y,a},Te.pointToGLWindowCoordinates=function(e,a,i,o){r.defined(o)||(o=new t.Cartesian2);var s=Ke;return t.Matrix4.multiplyByVector(e,n.Cartesian4.fromElements(i.x,i.y,i.z,1,s),s),n.Cartesian4.multiplyByScalar(s,1/s.w,s),t.Matrix4.multiplyByVector(a,s,s),t.Cartesian2.fromCartesian4(s,o)};var et=new n.Cartesian3,tt=new n.Cartesian3,nt=new n.Cartesian3;Te.rotationMatrixFromPositionVelocity=function(e,a,i,s){var u=r.defaultValue(i,t.Ellipsoid.WGS84).geodeticSurfaceNormal(e,et),l=n.Cartesian3.cross(a,u,tt);n.Cartesian3.equalsEpsilon(l,n.Cartesian3.ZERO,o.Math3D.EPSILON6)&&(l=n.Cartesian3.clone(n.Cartesian3.UNIT_X,l));var d=n.Cartesian3.cross(l,a,nt);return n.Cartesian3.normalize(d,d),n.Cartesian3.cross(a,d,l),n.Cartesian3.negate(l,l),n.Cartesian3.normalize(l,l),r.defined(s)||(s=new t.Matrix3),s[0]=a.x,s[1]=a.y,s[2]=a.z,s[3]=l.x,s[4]=l.y,s[5]=l.z,s[6]=d.x,s[7]=d.y,s[8]=d.z,s};var at=new t.Matrix4(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),rt=new n.Cartographic,it=new n.Cartesian3,ot=new n.Cartesian3,st=new t.Matrix3,ut=new t.Matrix4,lt=new t.Matrix4;function dt(e){e=r.defaultValue(e,r.defaultValue.EMPTY_OBJECT),this.attributes=e.attributes,this.indices=e.indices,this.primitiveType=r.defaultValue(e.primitiveType,t.PrimitiveType.TRIANGLES),this.boundingSphere=e.boundingSphere,this.geometryType=r.defaultValue(e.geometryType,u.NONE),this.boundingSphereCV=e.boundingSphereCV,this.offsetAttribute=e.offsetAttribute}Te.basisTo2D=function(e,a,r){var i=t.Matrix4.getTranslation(a,ot),o=e.ellipsoid,s=o.cartesianToCartographic(i,rt),u=e.project(s,it);n.Cartesian3.fromElements(u.z,u.x,u.y,u);var l=Te.eastNorthUpToFixedFrame(i,o,ut),d=t.Matrix4.inverseTransformation(l,lt),c=t.Matrix4.getMatrix3(a,st),f=t.Matrix4.multiplyByMatrix3(d,c,r);return t.Matrix4.multiply(at,f,r),t.Matrix4.setTranslation(r,u,r),r},Te.wgs84To2DModelMatrix=function(e,a,r){var i=e.ellipsoid,o=Te.eastNorthUpToFixedFrame(a,i,ut),s=t.Matrix4.inverseTransformation(o,lt),u=i.cartesianToCartographic(a,rt),l=e.project(u,it);n.Cartesian3.fromElements(l.z,l.x,l.y,l);var d=t.Matrix4.fromTranslation(l,ut);return t.Matrix4.multiply(at,s,r),t.Matrix4.multiply(d,r,r),r},Te.buildUp=function(e,t){var a=t.clone(),r=e.clone();r=n.Cartesian3.normalize(r,r),Math.abs(n.Cartesian3.dot(r,a))>=1&&(r=Math.abs(n.Cartesian3.dot(a,n.Cartesian3.UNIT_Y))<1?n.Cartesian3.clone(n.Cartesian3.UNIT_Y,r):n.Cartesian3.clone(n.Cartesian3.UNIT_Z,r));var i=new n.Cartesian3;return n.Cartesian3.cross(r,a,i),i=n.Cartesian3.normalize(i,i),n.Cartesian3.cross(a,i,r),r=n.Cartesian3.normalize(r,r)},Te.getHeading=function(e,t){var n;return n=o.Math3D.equalsEpsilon(Math.abs(e.z),1,o.Math3D.EPSILON3)?Math.atan2(t.y,t.x)-o.Math3D.PI_OVER_TWO:Math.atan2(e.y,e.x)-o.Math3D.PI_OVER_TWO,o.Math3D.TWO_PI-o.Math3D.zeroToTwoPi(n)},Te.convertToColumbusCartesian=function(e){var a=new t.GeographicProjection,r=a.ellipsoid,i=new n.Cartesian3,o=new n.Cartographic;return r.cartesianToCartographic(e,o),a.project(o,i),n.Cartesian3.fromElements(i.z,i.x,i.y)},Te.convertTo3DCartesian=function(e){var a=new t.GeographicProjection,r=a.ellipsoid,i=new n.Cartesian3,o=new n.Cartographic;return i=n.Cartesian3.fromElements(e.y,e.z,e.x),a.unproject(i,o),r.cartographicToCartesian(o,i)},dt.computeNumberOfVertices=function(e){var t=-1;for(var n in e.attributes)if(e.attributes.hasOwnProperty(n)&&r.defined(e.attributes[n])&&r.defined(e.attributes[n].values)){var a=e.attributes[n];t=a.values.length/a.componentsPerAttribute}return t};var ct=new n.Cartographic,ft=new n.Cartesian3,ht=new t.Matrix4,mt=[new n.Cartographic,new n.Cartographic,new n.Cartographic],pt=[new t.Cartesian2,new t.Cartesian2,new t.Cartesian2],yt=[new t.Cartesian2,new t.Cartesian2,new t.Cartesian2],wt=new n.Cartesian3,xt=new f,Ct=new t.Matrix4,Mt=new l;dt._textureCoordinateRotationPoints=function(e,a,r,i){var o,s=t.Rectangle.center(i,ct),u=n.Cartographic.toCartesian(s,r,ft),d=Te.eastNorthUpToFixedFrame(u,r,ht),c=t.Matrix4.inverse(d,ht),h=pt,m=mt;m[0].longitude=i.west,m[0].latitude=i.south,m[1].longitude=i.west,m[1].latitude=i.north,m[2].longitude=i.east,m[2].latitude=i.south;var p=wt;for(o=0;o<3;o++)n.Cartographic.toCartesian(m[o],r,p),p=t.Matrix4.multiplyByPointAsVector(c,p,p),h[o].x=p.x,h[o].y=p.y;var y=f.fromAxisAngle(n.Cartesian3.UNIT_Z,-a,xt),w=t.Matrix3.fromQuaternion(y,Ct),x=e.length,C=Number.POSITIVE_INFINITY,M=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY,E=Number.NEGATIVE_INFINITY;for(o=0;o<x;o++)p=t.Matrix4.multiplyByPointAsVector(c,e[o],p),p=t.Matrix3.multiplyByVector(w,p,p),C=Math.min(C,p.x),M=Math.min(M,p.y),_=Math.max(_,p.x),E=Math.max(E,p.y);var O=l.fromRotation(a,Mt),D=yt;D[0].x=C,D[0].y=M,D[1].x=C,D[1].y=E,D[2].x=_,D[2].y=M;var v=h[0],S=h[2].x-v.x,T=h[1].y-v.y;for(o=0;o<3;o++){var g=D[o];l.multiplyByVector(O,g,g),g.x=(g.x-v.x)/S,g.y=(g.y-v.y)/T}var P=D[0],N=D[1],I=D[2],R=new Array(6);return t.Cartesian2.pack(P,R),t.Cartesian2.pack(N,R,2),t.Cartesian2.pack(I,R,4),R},e.Geometry=dt,e.GeometryAttribute=function(e){e=r.defaultValue(e,r.defaultValue.EMPTY_OBJECT),this.componentDatatype=e.componentDatatype,this.componentsPerAttribute=e.componentsPerAttribute,this.normalize=r.defaultValue(e.normalize,!1),this.values=e.values},e.GeometryType=u,e.Quaternion=f,e.Transforms=Te}));
